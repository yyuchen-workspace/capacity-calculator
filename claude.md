專案名稱

建議使用容量計算器

專案概述

本專案旨在開發一個基於 Flutter 的網頁應用程式。該應用程式將作爲一個計算器，允許使用者在網頁上選擇或填入規格，進行特定的計算，並即時顯示結果。最終目標是實現一個任何人都可以透過網址訪問並使用的線上表單計算器。

功能要求 (Features)

使用者介面 (UI)

提供清晰簡潔美觀的佈局，適應不同網頁尺寸。
遇到計算後有小數點，只保留小數點第一位之前的數字，其他一律無條件進位，如0.85234進位為0.9。
以下網頁顯示文本內容我會用“”包裹住。
網頁上包含多個數入欄位：
1.小標題為“語音編碼格式”，右方可勾選“G.729(8 kbps)”或是“G.711（64 kbps）”，只可勾選一個，默認顯示無勾選。

2.小標題為"硬碟大小"，右方可勾選"32GB(標準版)"或是"自訂"，默認顯示無勾選。若勾選自訂可填入任意數字，顯示單位為“GB”，數字要做好防呆設定，如不可為負數、過大導致型別錯誤。這裡會在背景計算實際可用的容量。

3.小標題為"PBX規格"，右方為下拉式選單，選單上方要顯示標籤："同時通話/分機數量"，下拉式選單包括：“10/60”、“20/120”、“30/240”、“30/500”、“30/1000”，默認顯是空白。這裡會在背景根據硬碟大小計算出的實際可用的容量以及PBX規格對應之設定資料區，算出實際錄音可用保存容量。PBX規格對應之設定資料區如下：10/60=4GB、20/120=4GB、30/240=6GB、30/500=6GB、30/1000=8GB。

4.小標題為"公司類型"，右方可勾選"一般企業"或是“電訪企業”。默認顯示無勾選。

5.小標題為"話機數量"，右方為輸入欄位，默認顯示空白。使用者可自行輸入數字內容，顯示單位為”支“，需根據以上PBX規格選擇的分機數量做防呆處理，如PBX規格選擇10/60則此欄位不可輸入>60，也不可輸入負數等等。

6.小標題為"錄音天數"，右方為輸入欄位，默認顯示空白。使用者可自行輸入數字內容，顯示單位為“天”，需做防呆處理，不可輸入負數或超過356。

7.小標題為"每天平均通話秒數/每支話機"，右方欄位根據公司類型顯示內容與單位，為唯讀形式，默認顯示空白，若選擇一般企業則顯示“1800秒/話機/天“，若選擇電訪企業則顯示”18000秒/話機/天“。若有勾選公司類型，無需點擊計算結果按鈕即可顯示。

8.小標題為"每月通話秒數(預估)"，右方欄位以唯讀形式顯示，根據每天平均通話秒數、話機數量、錄音天數計算而出，需顯示計算結果與單位，顯示單位為“秒”。若未勾選公司類型或未填寫話機數量或未填寫錄音天數，則默認顯示空白。

9.小標題為"錄音佔用容量(GB)(預估可用 GB)"，預估可用GB根據PBX規格計算出的實際錄音可用保存容量顯示，如20.6GB，則顯示“(預估可用20.6GB)”，若有填寫硬碟大小與勾選PBX規格，會馬上計算並顯示，無需點擊送出按鈕。右方欄位以唯讀形式顯示，根據每月通話秒數、語音編碼格式計算而出，需顯示計算結果與單位，顯示單位為“GB”。若未勾選公司類型或未填寫話機數量或未填寫錄音天數或未勾選語音編碼格式，則默認顯示空白。

10.小標題為"建議使用硬碟容量大小"，右方欄位以唯讀形式顯示建議使用之硬碟容量大小，需顯示計算結果與單位，顯示單位為“GB”。建議使用之硬碟容量大小會先以公式計算硬碟使用容量後，再對照規格表後算出。

11.任何輸入欄位應限制使用者只能輸入數字（包含整數和小數），否則報錯“請輸入數字！”。若輸入負數則報錯：“請勿輸入負數！“。

12.設置一個“計算結果”按鈕，點擊後計算出所有欄位的結果並顯示，但需檢查語音編碼格式、硬碟大小、PBX規格、公司類型、話機數量、錄音天數是否未填寫。

13.報錯以彈出視窗顯示，需顯示哪一欄位有錯誤，若多個欄位有錯誤則彈出視窗顯示多個錯誤提示，不需跳出多個彈出視窗。

14.設置一個按鈕“顯示背景計算過程”，可彈出視窗顯示計算結果，但需要點擊過計算結果按鈕並成功計算才可顯示計算過程，否則彈出視窗顯示“尚未計算結果”。計算過程顯示內容格式如下，我希望用紅色顯示的字會以‘’單引號包裹住：
"
詳細結果:
'硬碟大小'*0.8=25.6GB實際可用

實際錄音可用保存容量
實際可用-1GB(系統區)-PBX規格='實際錄音可用保存容量'

每月通話秒數(預估)
'話機數量'台話機*'錄音天數'錄音天數*'每天平均通話秒數'通話秒數/天/隻話機='每月通話秒數''秒'

錄音占用容量(GB)
'每月通話秒數''秒'*語音編碼格式/1048576(轉MB)/1024(轉GB)*1.5(預留)=錄音佔用容量

建議使用硬碟
1GB PBX系統區+PBX規格+錄音佔用容量=5.75GB，'故建議''建議使用硬碟容量大小'

"

範例內容如下：
"
詳細結果:
'32'*0.8=25.6GB實際可用
實際錄音可用保存容量
25.6GB-1GB(系統區)-4GB='20.6GB'

每月通話秒數(預估)
'10'台話機*'30'錄音天數*'1800'通話秒數/天/隻話機='54萬秒'

錄音占用容量(GB)
'54萬秒'每月通話秒數*1000bytes(G.729)/1048576(轉MB)/1024(轉GB)*1.5(預留)=0.8GB

建議使用硬碟
1GB PBX系統區+4GB PBX規格+0.8GB 錄音占用容量=5.8GB，故建議'32GB'

"

15.切記要防止使用者輸入錯誤導致程式崩潰


全部計算邏輯：
實際可用容量：硬碟大小×0.8。例如硬碟大小為32GB則計算公式為32GB×0.8=25.6GB

實際錄音可用保存容量：實際可用容量-1-PBX設定資料區。例如實際可用容量為25.6GB，PBX選擇10/60對應設定資料區為4GB，則計算公式為25.6GB-1GB(系統區)-4GB=20.6GB。

每月通話秒數：每天平均通話秒數×話機數量×錄音天數。如話機數量為10支，錄音天數為30天，每天平均通話秒數為1800秒，每月通話秒數為1800通話秒數/天/支話機×10台話機×30錄音天數=540000秒，若計算結果破萬則轉換成萬秒為單位，未滿萬秒顯示詳細數字，如此處應顯示54萬秒。又舉例若計算結果為541000秒，則顯示54.1萬秒。

錄音佔用容量：每月通話秒數×語音編碼格式容量除以1048576(將單位轉MB)除以1024(將單位轉GB)×1.5(預留)。對應的語音編碼格式容量如下：G.729為1000bytes，G.711為8000bytes。如每月通話秒數為54萬秒，語音編碼格式為G.729(1000bytes)，則錄音佔用容量為54萬秒×1000bytes除以1048576除以1024×1.5=0.7543GB，但只要幫我留下小數點後第一位，並無條件進位第一位以後的數字，所以錄音佔用容量應為0.8GB。

硬碟使用容量：1GB PBX系統區+PBX規格＋錄音佔用容量。如PBX規格為10/60(4GB)，錄音佔用容量為0.8GB，則硬碟使用容量為1GB+4GB+0.8GB=5.8GB。

建議使用硬碟容量大小：硬碟使用容量對照規格表
規格表如下：
硬碟使用容量0~25GB=建議32GB，
硬碟使用容量26~102GB=建議128GB，
硬碟使用容量103~204GB=建議256GB，
硬碟使用容量205~820GB=建議1TB，
硬碟使用容量821~1638GB=建議2TB，
1638GB以上=建議「外掛R6錄音備份系統」。

如硬碟使用容量5.8GB對應的建議使用硬碟容量大小為32GB。


行為 (Behavior)

當使用者點擊計算結果按鈕時，應立即執行計算邏輯並更新唯讀結果欄位。

結果欄位應始終為唯讀，使用者無法直接編輯。

部署與可訪問性

應用程式必須能夠打包為網頁應用程式 (Web Application)。

打包後的檔案應為靜態檔案，可部署到任何標準的網頁伺服器或靜態網站託管服務上。

部署後，任何使用者只要有連結，就可以透過網路瀏覽器訪問和使用此計算器。

技術棧與環境 (Technical Stack & Environment)

前端框架： Flutter

程式語言： Dart

目標平台： Web (網頁瀏覽器)

開發流程與說明 (Development Workflow & Instructions for Claude)

專案設定：

請生成一個完整的 Flutter 網頁專案所需的程式碼檔案。

假設專案名稱為 web_calculator_app，主要程式碼位於 lib/main.dart。

UI 組件：

使用 MaterialApp 和 Scaffold 作為基本結構。

使用 TextFormField 或 TextField 作為輸入欄位，並確保設置 keyboardType: TextInputType.number 和 inputFormatters 來限制輸入。

使用 ElevatedButton 作為計算按鈕。

使用另一個 TextFormField 或 TextField 作為結果顯示欄位，並設置 readOnly: true。

狀態管理：

使用 StatefulWidget 來管理輸入欄位的值和計算結果的狀態。

使用 TextEditingController 來控制輸入欄位和結果顯示欄位的值。

事件處理：

當按鈕被按下時，觸發計算方法。

在計算方法中，安全地解析輸入值（使用 double.tryParse 處理潛在的非數字輸入）。

程式碼規範：

請提供清晰、結構良好、符合 Dart 最佳實踐的程式碼。

適當添加註釋，解釋關鍵邏輯和組件。

輸出格式：

請提供 lib/main.dart 檔案的完整程式碼內容。

範例使用者互動

使用者打開網頁。

勾選語音編碼格式G.729。

勾選自訂 填寫72GB。背景計算實際可用容量72GB×0.8=51.2GB，錄音佔用容量(GB)(預估可用 GB)顯示為：錄音佔用容量(GB)(預估可用51.2GB)。

PBX規格選擇10/60。計算實際錄音可用保存容量為51.2GB-1GB(系統區)-4GB=46.2GB

公司類型選擇一般公司。每天平均通話秒數/每支話機欄位顯示 1800秒/話機/天

話機數量填寫10。

錄音天數填寫30。

使用者點擊「計算結果」按鈕。

每月通話秒數計算1800通話秒數/天/支話機×10台話機×30錄音天數=540000秒，顯示54萬秒。

錄音佔用容量計算54萬秒×1000bytes除以1048576除以1024×1.5=0.7543GB，顯示0.8GB。

建議使用硬碟容量大小計算1GB+4GB+0.8GB=5.8GB，對照規格表為32GB，顯示32GB。


